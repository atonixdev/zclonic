{% extends 'base.html' %}
{% block content %}
    <div class="container">
        <div class="card">
            <h1>Welcome back{% if session.get('user_email') %}, {{ session.get('user_email').split('@')[0]|capitalize }}{% endif %}</h1>
            <p class="muted">Quick actions and recent activity.</p>

            <div style="display:flex;gap:0.75rem;flex-wrap:wrap;margin-top:1rem">
                <a class="btn btn-primary" href="{{ url_for('main.upload_get') }}">Upload data</a>
                <a class="btn" href="{{ url_for('main.complete_profile') }}">Complete profile</a>
                <a class="btn" href="{{ url_for('main.logout') }}">Logout</a>
            </div>

            <section style="margin-top:1.25rem">
                <h2>Upload a Document</h2>
                <form action="/upload" method="post" enctype="multipart/form-data">
                        <input type="file" name="document">
                        <button class="btn" type="submit">Process</button>
                </form>
            </section>

            {% if result %}
            <div class="result" style="margin-top:1rem">
                    <h3>AI Output:</h3>
                    <p>{{ result }}</p>
            </div>
            {% endif %}

            <section style="margin-top:1.5rem">
                <h3>Recent activity</h3>
                <div class="muted">No activity yet. Your uploads and analysis will appear here.</div>
            </section>
        </div>
    </div>
{% endblock %}